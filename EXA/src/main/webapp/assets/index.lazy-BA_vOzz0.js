import{z as i,c as f,o as y,f as j,b as N,u as w,i as v,k as S,A as u,j as e,a as k,t as E,l as F}from"./index-DCreN3iK.js";const L=i.object({start:i.string().min(1,"Start time is required"),end:i.string().min(1,"End time is required"),room:i.string().min(1,"Room is required")}).refine(s=>{const r=new Date(s.start);return new Date(s.end)>r},{message:"End time must be after start time",path:["end"]}),q=f("/exa/ui/lecture/new/$courseId/")({component:A});function A(){const{courseId:s}=y({from:"/exa/ui/lecture/new/$courseId/"}),r=j(),{state:o}=N(),{data:l,isLoading:x}=w(),{mutate:g,isPending:d}=v({endpoint:"http://localhost:8080/exa/lectures",redirectTo:`/exa/ui/courses/${s}`}),{register:n,handleSubmit:h,formState:{errors:t,isSubmitting:c}}=S({resolver:E(L)});if(o!==u.Admin&&o!==u.Lecturer)return r({to:"/exa/ui/courses"}),null;if(x)return e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})});if(!l)return e.jsx("div",{className:"p-4 bg-yellow-50 text-yellow-600 rounded-lg",children:"Failed to load required data"});const m=k(l).find(a=>a.id===s);if(!m)return r({to:"/exa/ui/courses"}),null;const b=async a=>{try{g({course:s,start:a.start,end:a.end,room:a.room})}catch(p){console.error("Error creating lecture:",p),F.error("Error creating lecture")}};return e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Schedule New Lecture"}),e.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Fill in the details below to schedule a new lecture for ",m.name,"."]})]}),e.jsxs("form",{onSubmit:h(b),className:"bg-white shadow-sm ring-1 ring-gray-900/5 sm:rounded-xl",children:[e.jsx("div",{className:"px-4 py-6 sm:p-8",children:e.jsxs("div",{className:"grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"start",className:"block text-sm font-medium leading-6 text-gray-900",children:"Start Time"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("input",{type:"datetime-local",id:"start",...n("start"),className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6"}),t.start&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.start.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"end",className:"block text-sm font-medium leading-6 text-gray-900",children:"End Time"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("input",{type:"datetime-local",id:"end",...n("end"),className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6"}),t.end&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.end.message})]})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{htmlFor:"room",className:"block text-sm font-medium leading-6 text-gray-900",children:"Room"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("input",{type:"text",id:"room",...n("room"),placeholder:"e.g., A1.2.1",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6"}),t.room&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.room.message})]})]})]})}),e.jsxs("div",{className:"flex items-center justify-end gap-x-4 border-t border-gray-900/10 px-4 py-4 sm:px-8",children:[e.jsx("button",{type:"button",onClick:()=>r({to:"/exa/ui/courses/$courseId",params:{courseId:s}}),className:"rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:c||d,className:"rounded-md bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",children:c||d?"Scheduling...":"Schedule Lecture"})]})]})]})}export{q as Route};
