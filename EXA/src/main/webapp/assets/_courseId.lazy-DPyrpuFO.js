import{c as E,j as e,a as T,p as B,b as H,f as I,L as c}from"./index-Bl3LYA1H.js";import{u as O}from"./use-courses-DEqlss40.js";import{u as S}from"./use-exams-CKVDgMFb.js";import{u as R}from"./use-lecturers-BI2fuJt7.js";import{u as U}from"./use-lectures-BlgCO-Ci.js";const X=E("/exa/ui/courses/$courseId")({component:F});function F(){const{courseId:o}=X.useParams(),{data:d,isLoading:v}=O(),{data:m,isLoading:N}=R(),{data:u,isLoading:y}=S(),{data:x,isLoading:L}=U();if(v||N||y||L)return e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})});if(!d||!m||!u||!x)return e.jsx("div",{className:"p-4 bg-yellow-50 text-yellow-600 rounded-lg",children:"No data available"});const k=T(d),w=B(m),h=H(u),g=I(x),a=k.find(s=>s.id===o),t=w.find(s=>s.id===(a==null?void 0:a.lecturer)),p=h.filter(s=>s.course===o),j=g.filter(s=>s.course===o).sort((s,r)=>(s.start??"").localeCompare(r.start??""));console.log("Raw Lectures Data:",g.filter(s=>s.course===o)),console.log("Raw Exams Data:",h.filter(s=>s.course===o));const l=s=>{if(!s)return null;try{const r=new Date(s);if(!isNaN(r.getTime()))return r;const n=s.match(/^(\d{4}-\d{2}-\d{2})T(\d+)T:(\d{2}):(\d{2})$/);if(!n)return null;const[,i,$,C,M]=n,W=`${$.padStart(2,"0")}:${C}:${M}`,z=`${i} ${W}`,b=new Date(z);return isNaN(b.getTime())?null:b}catch(r){return console.error("Error parsing date:",r),null}},f=s=>s?s.toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"}):"Date not set",D=s=>s?s.toLocaleString("en-US",{hour:"numeric",minute:"2-digit"}):"Time not set";return a?e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsxs("div",{className:"mb-8",children:[e.jsxs(c,{to:"/exa/ui/courses",className:"text-gray-600 hover:text-gray-900 transition-colors flex items-center gap-2 mb-4",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Courses"]}),e.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:a.name}),e.jsx("span",{className:"px-4 py-2 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:a.faculty})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Course Details"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"Max Students: ",a.maxStudents]})})]}),t&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Lecturer"}),e.jsx(c,{to:"/exa/ui/lecturers/$lecturerId",params:{lecturerId:t.id??""},className:"block bg-gray-50 rounded-lg p-6 border border-gray-200 hover:border-blue-300 transition-colors",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("img",{src:`https://i.pravatar.cc/150?u=${t.id}`,alt:`${t.firstname} ${t.name}`,className:"w-16 h-16 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900",children:[t.firstname," ",t.name]}),e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),t.faculty??"No Faculty"]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})}),t.username]})]})]})]})})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Exams"}),p.length>0?e.jsx("div",{className:"space-y-4",children:p.map(s=>{const r=l(s.date),n=r?r>=new Date:!1;return e.jsxs(c,{to:"/exa/ui/exams/$examId",params:{examId:s.id??""},className:`block p-4 rounded-lg border ${n?"bg-white border-blue-200 hover:border-blue-300":"bg-gray-50 border-gray-200 hover:border-gray-300"} transition-colors`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${s.isWritten?"bg-purple-100 text-purple-700":"bg-green-100 text-green-700"}`,children:s.isWritten?"Written":"Oral"}),e.jsx("span",{className:`text-sm ${n?"text-blue-600":"text-gray-500"}`,children:f(r)})]}),e.jsxs("div",{className:"text-gray-600 mt-2",children:[s.isOnline?"Online":"On-site"," - ",s.roomOrLink]})]},s.id)})}):e.jsx("p",{className:"text-gray-500",children:"No exams scheduled"})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Lectures"}),j.length>0?e.jsx("div",{className:"space-y-4",children:j.map(s=>{const r=l(s.start),n=l(s.end),i=r?r>=new Date:!1;return e.jsxs("div",{className:`p-4 rounded-lg border ${i?"bg-white border-blue-200":"bg-gray-50 border-gray-200"}`,children:[e.jsx("div",{className:"flex justify-between items-start mb-2",children:e.jsx("div",{className:"space-y-1",children:e.jsxs("div",{className:`text-sm ${i?"text-blue-600":"text-gray-500"}`,children:[f(r)," - ",D(n)]})})}),e.jsxs("div",{className:"flex items-center text-gray-600 mt-2",children:[e.jsxs("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.roomOrLink]})]},s.id)})}):e.jsx("p",{className:"text-gray-500",children:"No lectures scheduled"})]})]})]})]})}):e.jsx("div",{className:"p-4 bg-red-50 text-red-600 rounded-lg",children:"Course not found"})}export{X as Route};
