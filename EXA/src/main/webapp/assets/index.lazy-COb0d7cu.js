import{z as i,c as f,o as y,f as N,b as j,u as v,i as w,k as S,A as x,j as e,a as C,t as k,l as F}from"./index-EqhaSU0H.js";const M=i.object({credits:i.string().min(1,"Credits are required").refine(s=>!isNaN(Number(s)),"Must be a valid number").refine(s=>Number(s)>0,"Must be greater than 0"),name:i.string().min(1,"Module name is required"),studies:i.string().min(1,"Studies are required"),description:i.string().optional()}),z=f("/exa/ui/module/new/$courseId/")({component:E});function E(){const{courseId:s}=y({from:"/exa/ui/module/new/$courseId/"}),n=N(),{state:d}=j(),{data:l,isLoading:g}=v(),{mutate:p,isPending:c}=w({endpoint:"http://localhost:8080/exa/modules",redirectTo:`/exa/ui/courses/${s}`}),{register:a,handleSubmit:b,formState:{errors:t,isSubmitting:m}}=S({resolver:k(M),defaultValues:{description:"No description provided"}});if(d!==x.Admin&&d!==x.Lecturer)return n({to:"/exa/ui/courses"}),null;if(g)return e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})});if(!l)return e.jsx("div",{className:"p-4 bg-yellow-50 text-yellow-600 rounded-lg",children:"Failed to load required data"});const u=C(l).find(r=>r.id===s);if(!u)return n({to:"/exa/ui/courses"}),null;const h=async r=>{try{p({course:s,credits:r.credits,name:r.name,studies:r.studies.split(",").map(o=>o.trim()).filter(Boolean).join(","),description:r.description||"No description provided"})}catch(o){console.error("Error creating module:",o),F.error("Error creating module")}};return e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Create New Module"}),e.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Fill in the details below to create a new module for ",u.name,"."]})]}),e.jsxs("form",{onSubmit:b(h),className:"bg-white shadow-sm ring-1 ring-gray-900/5 sm:rounded-xl",children:[e.jsx("div",{className:"px-4 py-6 sm:p-8",children:e.jsxs("div",{className:"grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-2",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium leading-6 text-gray-900",children:"Module Name"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("input",{type:"text",id:"name",...a("name"),className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6"}),t.name&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.name.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"credits",className:"block text-sm font-medium leading-6 text-gray-900",children:"Credits"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("input",{type:"number",id:"credits",min:"1",...a("credits"),className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6"}),t.credits&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.credits.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"studies",className:"block text-sm font-medium leading-6 text-gray-900",children:"Studies"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("input",{type:"text",id:"studies",...a("studies"),placeholder:"Enter study programs (comma-separated)",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6"}),t.studies&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.studies.message}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:'Separate multiple study programs with commas (e.g., "CS, IT, SE")'})]})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium leading-6 text-gray-900",children:"Description"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("textarea",{id:"description",rows:4,...a("description"),className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6"}),t.description&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.description.message})]})]})]})}),e.jsxs("div",{className:"flex items-center justify-end gap-x-4 border-t border-gray-900/10 px-4 py-4 sm:px-8",children:[e.jsx("button",{type:"button",onClick:()=>n({to:"/exa/ui/courses/$courseId",params:{courseId:s}}),className:"rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m||c,className:"rounded-md bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",children:m||c?"Creating...":"Create Module"})]})]})]})}export{z as Route};
