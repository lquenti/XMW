import{c as H,j as e,a as I,p as O,b as R,f as X,g as U,L as c}from"./index-SsTAdifg.js";import{u as P}from"./use-courses-BCKvGkJt.js";import{u as F}from"./use-exams-D7t73XWJ.js";import{u as V}from"./use-lecturers-DR4LyVYW.js";import{u as A}from"./use-lectures-Dxze9bPC.js";import{u as q}from"./use-modules-CqBUH5eO.js";const G=H("/exa/ui/courses/$courseId")({component:J});function J(){const{courseId:l}=G.useParams(),{data:m,isLoading:y}=P(),{data:u,isLoading:L}=V(),{data:x,isLoading:k}=F(),{data:h,isLoading:w}=A(),{data:g,isLoading:D}=q(),d=s=>{if(!s)return null;try{const r=new Date(s);if(!isNaN(r.getTime()))return r;const t=s.match(/^(\d{4}-\d{2}-\d{2})T(\d+)T:(\d{2}):(\d{2})$/);if(!t)return null;const[,n,T,B,S]=t,z=`${T.padStart(2,"0")}:${B}:${S}`,E=`${n} ${z}`,N=new Date(E);return isNaN(N.getTime())?null:N}catch(r){return console.error("Error parsing date:",r),null}},j=s=>s?s.toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"}):"Date not set",M=s=>s?s.toLocaleString("en-US",{hour:"numeric",minute:"2-digit"}):"Time not set";if(y||L||k||w||D)return e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})});if(!m||!u||!x||!h||!g)return e.jsx("div",{className:"p-4 bg-yellow-50 text-yellow-600 rounded-lg",children:"No data available"});const C=I(m),$=O(u),p=R(x),f=X(h),W=U(g),i=C.find(s=>s.id===l),a=$.find(s=>s.id===(i==null?void 0:i.lecturer)),v=p.filter(s=>s.course===l),b=f.filter(s=>s.course===l).sort((s,r)=>{const t=d(s.start),n=d(r.start);return!t&&!n?0:t?n?t.getTime()-n.getTime():-1:1}),o=W.find(s=>s.course===l);return console.log("Raw Lectures Data:",f.filter(s=>s.course===l)),console.log("Raw Exams Data:",p.filter(s=>s.course===l)),i?e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsxs("div",{className:"mb-8",children:[e.jsxs(c,{to:"/exa/ui/courses",className:"text-gray-600 hover:text-gray-900 transition-colors flex items-center gap-2 mb-4",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Courses"]}),e.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:i.name}),o&&e.jsxs("h2",{className:"text-xl text-gray-600 mt-2",children:["Module: ",o.name]})]}),e.jsx("span",{className:"px-4 py-2 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:i.faculty})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Course Details"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"Max Students: ",i.maxStudents]})})]}),a&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Lecturer"}),e.jsx(c,{to:"/exa/ui/lecturers/$lecturerId",params:{lecturerId:a.id??""},className:"block bg-gray-50 rounded-lg p-6 border border-gray-200 hover:border-blue-300 transition-colors",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("img",{src:`https://i.pravatar.cc/150?u=${a.id}`,alt:`${a.firstname} ${a.name}`,className:"w-16 h-16 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900",children:[a.firstname," ",a.name]}),e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),a.faculty??"No Faculty"]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})}),a.username]})]})]})]})})]})]}),o&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Module Details"}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center text-gray-600 mb-2",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),e.jsxs("span",{className:"font-medium",children:["Credits: ",o.credits]})]}),e.jsx("p",{className:"text-gray-600",children:o.description}),o.studies.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-600 mb-2",children:"Study Programs:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:o.studies.map((s,r)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-sm",children:s},r))})]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Exams"}),v.length>0?e.jsx("div",{className:"space-y-4",children:v.map(s=>{const r=d(s.date),t=r?r>=new Date:!1;return e.jsxs(c,{to:"/exa/ui/exams/$examId",params:{examId:s.id??""},className:`block p-4 rounded-lg border ${t?"bg-white border-blue-200 hover:border-blue-300":"bg-gray-50 border-gray-200 hover:border-gray-300"} transition-colors`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${s.isWritten?"bg-purple-100 text-purple-700":"bg-green-100 text-green-700"}`,children:s.isWritten?"Written":"Oral"}),e.jsx("span",{className:`text-sm ${t?"text-blue-600":"text-gray-500"}`,children:j(r)})]}),e.jsxs("div",{className:"text-gray-600 mt-2",children:[s.isOnline?"Online":"On-site"," - ",s.roomOrLink]})]},s.id)})}):e.jsx("p",{className:"text-gray-500",children:"No exams scheduled"})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Lectures"}),b.length>0?e.jsx("div",{className:"space-y-4",children:b.map(s=>{const r=d(s.start),t=d(s.end),n=r?r>=new Date:!1;return e.jsxs("div",{className:`p-4 rounded-lg border ${n?"bg-white border-blue-200":"bg-gray-50 border-gray-200"}`,children:[e.jsx("div",{className:"flex justify-between items-start mb-2",children:e.jsx("div",{className:"space-y-1",children:e.jsxs("div",{className:`text-sm ${n?"text-blue-600":"text-gray-500"}`,children:[j(r)," - ",M(t)]})})}),e.jsxs("div",{className:"flex items-center text-gray-600 mt-2",children:[e.jsxs("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.roomOrLink]})]},s.id)})}):e.jsx("p",{className:"text-gray-500",children:"No lectures scheduled"})]})]})]})]})}):e.jsx("div",{className:"p-4 bg-red-50 text-red-600 rounded-lg",children:"Course not found"})}export{G as Route};
